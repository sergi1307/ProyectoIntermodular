@url = http://localhost:8080/api
# Pega tu token aquí abajo
@token = 3|ZXWEF6KKaV4ukuIAnGSegCV8BgVnT6nguTQu10MWe8206e31

### ------------------------------------------------------------------------
### 1. ARRANQUE (Auth)
### ------------------------------------------------------------------------

### Crear cuenta nueva
POST {{url}}/auth/register
Content-Type: application/json
Accept: application/json

{
  "name": "Usuario Test",
  "email": "test@mail.com",
  "phone": "600123456",
  "registration_date": "2026-01-26",
  "password": "password"
}

### Loguearse (Copia el token)
POST {{url}}/auth/login 
Content-Type: application/json
Accept: application/json

{
  "email": "test@mail.com",
  "password": "password"
}

### ------------------------------------------------------------------------
### 2. CONFIGURACIÓN USUARIO
### ------------------------------------------------------------------------

### Ver quién soy
GET {{url}}/users/me
Authorization: Bearer {{token}}
Accept: application/json

### Ver perfil completo
GET {{url}}/users/my-profile
Authorization: Bearer {{token}}
Accept: application/json

### Crear punto entrega (Necesario)
POST {{url}}/delivery_points/store
Authorization: Bearer {{token}}
Content-Type: application/json
Accept: application/json

{
    "id_user": 1,
    "name": "Mi Casa",
    "direction": "Calle Falsa 123",
    "latitude": 39.4,
    "length": -0.3
}

### ------------------------------------------------------------------------
### 3. VENDEDOR (Crear contenido)
### ------------------------------------------------------------------------

### Crear una categoría
POST {{url}}/categories/store
Authorization: Bearer {{token}}
Content-Type: application/json
Accept: application/json

{
    "name": "Fruta Fresca"
}

### Publicar un producto
POST {{url}}/products/store
Authorization: Bearer {{token}}
Content-Type: application/json
Accept: application/json

{
    "id_delivery_point": 1,
    "id_category": 1,
    "name": "Manzanas",
    "description": "Rojas y dulces",
    "price": 2.50,
    "stock": 50,
    "type_stock": "Kg",
    "state": "Disponible"
}

### Ver mis productos
GET {{url}}/products/mine
Authorization: Bearer {{token}}
Accept: application/json

### ------------------------------------------------------------------------
### 4. COMPRADOR (Carrito)
### ------------------------------------------------------------------------

### Ver catálogo
GET {{url}}/products
Accept: application/json

### Añadir al carrito
POST {{url}}/cart/add
Authorization: Bearer {{token}}
Content-Type: application/json
Accept: application/json

{
    "id_product": 1,
    "quantity": 2
}

### Ver mi carrito
GET {{url}}/cart
Authorization: Bearer {{token}}
Accept: application/json

### Finalizar compra (Checkout)
POST {{url}}/cart/checkout
Authorization: Bearer {{token}}
Content-Type: application/json
Accept: application/json

{
    "id_delivery_point": 1
}

### ------------------------------------------------------------------------
### 5. HISTORIAL Y REVIEWS
### ------------------------------------------------------------------------

### Ver mis compras
GET {{url}}/sales/my-purchases
Authorization: Bearer {{token}}
Accept: application/json

### Valorar la compra
POST {{url}}/reviews/store
Authorization: Bearer {{token}}
Content-Type: application/json
Accept: application/json

{
    "id_sale": 1,
    "calification": 5,
    "comment": "Muy rico todo"
}

### ------------------------------------------------------------------------
### 6. SALIDA
### ------------------------------------------------------------------------

### Cerrar sesión
POST {{url}}/auth/logout
Authorization: Bearer {{token}}
Accept: application/json